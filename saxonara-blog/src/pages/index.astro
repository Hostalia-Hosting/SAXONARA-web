---
import { getCollection } from 'astro:content';
import MainLayout from '../layouts/MainLayout.astro';

// Agafem els posts i els ordenem de més nou a més vell en un sol pas
const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<MainLayout 
  title="SAXONARA: Music, Events & Stories" 
  description="Live moments from weddings, luxury events and unforgettable parties across Europe — featuring behind-the-scenes videos, musical inspiration and real performances by SAXONARA. Explore the blog and get inspired for your next celebration."
>
  <div class="blog-list">
    {posts.map(post => (

      <article class="post">
          <a class="post-thumb" href={`/life/blog/${post.id || post.slug}/`}>
              <img class="img-responsive" src={post.data.heroImage} alt={post.data.heroImageAlt || ""}>
          </a>
          <div class="post-content">
              <h4 class="post-title"><a href={`/life/blog/${post.id || post.slug}/`}>{post.data.title}</a></h4>
              <p class="post-date">{post.data.pubDate.toLocaleDateString('en-GB')}</p>
              <div class="post-excerpt">
                  <p>{post.data.description}</p>
              </div>
          </div>
      </article>

    ))}

  </div>
</MainLayout>